<?xml version="1.0" encoding="UTF-8"?>
<bpel:process xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:vprop="http://docs.oasis-open.org/wsbpel/2.0/varprop" xmlns:pnlk="http://docs.oasis-open.org/wsbpel/2.0/plnktype" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ode="http://www.apache.org/ode/type/extension" xmlns:tcFailure="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcFailure.rest" xmlns:tcGetResult="http://ns.mediasmithsforge.com/foxtel/tcAdapter/tcGetResult.rest" xmlns:materialTransferForTC="http://ns.mediasmithsforge.com/foxtel/wfAdapter/materialTransferForTC.rest" xmlns:FSAdapter="http://ns.mediasmiths.com/foxtel/fs/adapter" xmlns:complexvar="http://www.example.org/complexvar" xmlns:FS_Adapter="http://ns.mediasmithsforge.com/foxtel/export/FS_Adapter" xmlns:delete="http://ns.mediasmithsforge.com/foxtel/fsAdapter/delete.rest" xmlns:tcGetStatus="http://ns.mediasmithsforge.com/foxtel/tcAdapter/tcGetStatus.rest" xmlns:tcGeneratePCP="http://ns.mediasmithsforge.com/foxtel/tcAdapter/tcGeneratePCP.rest" xmlns:tcStartJob="http://ns.mediasmithsforge.com/foxtel/tcAdapter/tcStartJob.rest" xmlns:Caller="http://ns.mediasmithsforge.com/foxtel/export/Caller" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:tcTotalFailure="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcTotalFailure.rest" xmlns:this="http://ns.mediasmithsforge.com/foxtel/export/TC" xmlns:wfAdapter="http://ns.mediasmiths.com/foxtel/wf/adapter" xmlns:createJob="http://ns.mediasmithsforge.com/foxtel/tcAdapter/createJob.rest" xmlns:diag="http://ns.mediasmithsforge.com/foxtel/export" xmlns:TCAdapter="http://ns.mediasmithsforge.com/foxtel/export/TCAdapter" xmlns:tcPassed="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcPassed.rest" xmlns:WFAdapter="http://ns.mediasmithsforge.com/foxtel/export/WFAdapter" xmlns:getTranscodeOutputLocation="http://ns.mediasmithsforge.com/foxtel/wfAdapter/getTranscodeOutputLocation.rest" xmlns:tns="http://ns.mediasmiths.com/foxtel/tc/adapter" xmlns:tcBuildJobXML="http://ns.mediasmithsforge.com/foxtel/tcAdapter/tcBuildJobXML.rest" xmlns:bpmn="http://www.intalio.com/bpms" xmlns:atomic="http://ode.apache.org/atomicScope" queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0" bpmn:label="TC" name="TC" bpmn:id="_3QpdIB5_EeKGPvPCWJ8IKg" targetNamespace="http://ns.mediasmithsforge.com/foxtel/export/TC">
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/fsAdapter/delete.rest" location="fsAdapter/delete.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/tcAdapter/createJob.rest" location="tcAdapter/createJob.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/getTranscodeOutputLocation.rest" location="wfAdapter/getTranscodeOutputLocation.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/materialTransferForTC.rest" location="wfAdapter/materialTransferForTC.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcFailure.rest" location="wfAdapter/tcFailure.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcPassed.rest" location="wfAdapter/tcPassed.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcTotalFailure.rest" location="wfAdapter/tcTotalFailure.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/export" location="export.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/export/TC" location="export-TC.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://www.example.org/complexvar" location="complexvar.xsd" importType="http://www.w3.org/2001/XMLSchema"></bpel:import>
  <bpel:partnerLinks>
    <bpel:partnerLink name="callerAndTCPlkVar" partnerLinkType="diag:CallerAndTC" myRole="TC_for_Caller"/>
    <bpel:partnerLink name="wFAdapterAndTCForHttpPortPlk1Var" partnerLinkType="diag:WFAdapterAndTCForHttpPortPlk1" initializePartnerRole="yes" partnerRole="WFAdapter_for_TC"/>
    <bpel:partnerLink name="wFAdapterAndTCForHttpPortPlk4Var" partnerLinkType="diag:WFAdapterAndTCForHttpPortPlk4" initializePartnerRole="yes" partnerRole="WFAdapter_for_TC"/>
    <bpel:partnerLink name="wFAdapterAndTCForHttpPortPlk3Var" partnerLinkType="diag:WFAdapterAndTCForHttpPortPlk3" initializePartnerRole="yes" partnerRole="WFAdapter_for_TC"/>
    <bpel:partnerLink name="wFAdapterAndTCForHttpPortPlk2Var" partnerLinkType="diag:WFAdapterAndTCForHttpPortPlk2" initializePartnerRole="yes" partnerRole="WFAdapter_for_TC"/>
    <bpel:partnerLink name="fS_AdapterAndTCForHttpPortPlkVar" partnerLinkType="diag:FS_AdapterAndTCForHttpPortPlk" initializePartnerRole="yes" partnerRole="FS_Adapter_for_TC"/>
    <bpel:partnerLink name="wFAdapterAndTCForHttpPortPlk0Var" partnerLinkType="diag:WFAdapterAndTCForHttpPortPlk0" initializePartnerRole="yes" partnerRole="WFAdapter_for_TC"/>
    <bpel:partnerLink name="tcAndTCAdapterForHttpPortPlkVar" partnerLinkType="diag:TcAndTCAdapterForHttpPortPlk" initializePartnerRole="yes" partnerRole="TCAdapter_for_TC"/>
  </bpel:partnerLinks>
  <bpel:variables>
    <bpel:variable name="complexvariable" type="complexvar:complexvariable"/>
    <bpel:variable name="thisEventStartMessageRequest" messageType="this:EventStartMessageRequest"/>
    <bpel:variable name="tcTotalFailureTcTotalFailureResponseMsg" messageType="tcTotalFailure:tcTotalFailure_output"/>
    <bpel:variable name="materialTransferForTCMaterialTransferForTCResponseMsg" messageType="materialTransferForTC:materialTransferForTC_output"/>
    <bpel:variable name="tcTotalFailureTcTotalFailureRequestMsg" messageType="tcTotalFailure:tcTotalFailure_input"/>
    <bpel:variable name="materialTransferForTCMaterialTransferForTCRequestMsg" messageType="materialTransferForTC:materialTransferForTC_input"/>
  </bpel:variables>
  <bpel:sequence>
    <bpel:receive partnerLink="callerAndTCPlkVar" portType="this:ForCaller" operation="EventStartMessage" variable="thisEventStartMessageRequest" createInstance="yes" bpmn:label="Message_Start_Event" name="Message_Start_Event" bpmn:id="_4xHKUB5_EeKGPvPCWJ8IKg"></bpel:receive>
    <bpel:assign name="init-variables-TC" bpmn:id="_4xHKUB5_EeKGPvPCWJ8IKg">
      <bpel:copy bpmn:label="$tcTotalFailureTcTotalFailureRequestMsg">
        <bpel:from>
          <bpel:literal>
<wfAdapter:tcTotalFailure>
  <wfAdapter:assetID></wfAdapter:assetID>
  <wfAdapter:taskID></wfAdapter:taskID>
  <wfAdapter:title></wfAdapter:title>
</wfAdapter:tcTotalFailure></bpel:literal>
        </bpel:from>
        <bpel:to>$tcTotalFailureTcTotalFailureRequestMsg.body</bpel:to>
      </bpel:copy>
      <bpel:copy bpmn:label="$materialTransferForTCMaterialTransferForTCRequestMsg">
        <bpel:from>
          <bpel:literal>
<wfAdapter:materialTransferForTCRequest>
  <wfAdapter:assetID></wfAdapter:assetID>
  <wfAdapter:forTX></wfAdapter:forTX>
</wfAdapter:materialTransferForTCRequest></bpel:literal>
        </bpel:from>
        <bpel:to>$materialTransferForTCMaterialTransferForTCRequestMsg.body</bpel:to>
      </bpel:copy>
    </bpel:assign>
    <bpel:empty bpmn:label="initialise variables" name="initialise_variables" bpmn:id="_PLwbQCHJEeK7ToHmhWq0hw"/>
    <bpel:invoke partnerLink="wFAdapterAndTCForHttpPortPlk1Var" portType="materialTransferForTC:restInterface" operation="materialTransferForTC" inputVariable="materialTransferForTCMaterialTransferForTCRequestMsg" outputVariable="materialTransferForTCMaterialTransferForTCResponseMsg" bpmn:label="get location of media file" name="get_location_of_media_file" bpmn:id="_FUCzcB9REeKBCuRJN5U2jA"></bpel:invoke>
    <bpel:scope bpmn:label="SubProcess" name="SubProcess" bpmn:id="_ihCDUCHIEeK7ToHmhWq0hw">
      <bpel:variables>
        <bpel:variable name="getTranscodeOutputLocationTranscodeOutputLocationRequestMsg" messageType="getTranscodeOutputLocation:transcodeOutputLocation_input"/>
        <bpel:variable name="tcPassedTcPassedRequestMsg" messageType="tcPassed:tcPassed_input"/>
        <bpel:variable name="tcFailureTcFailureRequestMsg" messageType="tcFailure:tcFailure_input"/>
        <bpel:variable name="tcPassedTcPassedResponseMsg" messageType="tcPassed:tcPassed_output"/>
        <bpel:variable name="deleteDeleteResponseMsg" messageType="delete:delete_output"/>
        <bpel:variable name="tcFailureTcFailureResponseMsg" messageType="tcFailure:tcFailure_output"/>
        <bpel:variable name="getTranscodeOutputLocationTranscodeOutputLocationResponseMsg" messageType="getTranscodeOutputLocation:transcodeOutputLocation_output"/>
        <bpel:variable name="deleteDeleteRequestMsg" messageType="delete:delete_input"/>
        <bpel:variable name="createJobCreateJobRequestMsg" messageType="createJob:createJob_input"/>
        <bpel:variable name="createJobCreateJobResponseMsg" messageType="createJob:createJob_output"/>
      </bpel:variables>
      <bpel:sequence>
        <bpel:assign name="init-variables-SubProcess" bpmn:id="_ihCDUCHIEeK7ToHmhWq0hw">
          <bpel:copy bpmn:label="$getTranscodeOutputLocationTranscodeOutputLocationRequestMsg">
            <bpel:from>
              <bpel:literal>
<getTranscodeOutputLocation:packageID_urlType></getTranscodeOutputLocation:packageID_urlType></bpel:literal>
            </bpel:from>
            <bpel:to>$getTranscodeOutputLocationTranscodeOutputLocationRequestMsg.packageID</bpel:to>
          </bpel:copy>
          <bpel:copy bpmn:label="$tcPassedTcPassedRequestMsg">
            <bpel:from>
              <bpel:literal>
<wfAdapter:tcPassedNotification>
  <wfAdapter:assetID></wfAdapter:assetID>
  <wfAdapter:taskID></wfAdapter:taskID>
  <wfAdapter:title></wfAdapter:title>
</wfAdapter:tcPassedNotification></bpel:literal>
            </bpel:from>
            <bpel:to>$tcPassedTcPassedRequestMsg.body</bpel:to>
          </bpel:copy>
          <bpel:copy bpmn:label="$tcFailureTcFailureRequestMsg">
            <bpel:from>
              <bpel:literal>
<wfAdapter:tcFailureNotification>
  <wfAdapter:assetID></wfAdapter:assetID>
  <wfAdapter:taskID></wfAdapter:taskID>
  <wfAdapter:title></wfAdapter:title>
</wfAdapter:tcFailureNotification></bpel:literal>
            </bpel:from>
            <bpel:to>$tcFailureTcFailureRequestMsg.body</bpel:to>
          </bpel:copy>
          <bpel:copy bpmn:label="$deleteDeleteRequestMsg">
            <bpel:from>
              <bpel:literal>
<FSAdapter:deleteRequest>
  <FSAdapter:path></FSAdapter:path>
</FSAdapter:deleteRequest></bpel:literal>
            </bpel:from>
            <bpel:to>$deleteDeleteRequestMsg.body</bpel:to>
          </bpel:copy>
          <bpel:copy bpmn:label="$createJobCreateJobRequestMsg">
            <bpel:from>
              <bpel:literal>
<tns:TCJob>
  <tns:purpose></tns:purpose>
  <tns:resolution></tns:resolution>
  <tns:audioType></tns:audioType>
  <tns:description></tns:description>
  <tns:inputFile></tns:inputFile>
  <tns:outputFolder></tns:outputFolder>
  <tns:outputFileBasename></tns:outputFileBasename>
  <tns:bug>
    <tns:channel></tns:channel>
    <tns:position></tns:position>
    <tns:opacity></tns:opacity>
  </tns:bug>
  <tns:timecode>
    <tns:location></tns:location>
    <tns:size></tns:size>
    <tns:background></tns:background>
    <tns:foreground></tns:foreground>
  </tns:timecode>
  <tns:priority></tns:priority>
</tns:TCJob></bpel:literal>
            </bpel:from>
            <bpel:to>$createJobCreateJobRequestMsg.body</bpel:to>
          </bpel:copy>
        </bpel:assign>
        <bpel:invoke partnerLink="tcAndTCAdapterForHttpPortPlkVar" portType="createJob:restInterface" operation="createJob" inputVariable="createJobCreateJobRequestMsg" outputVariable="createJobCreateJobResponseMsg" bpmn:label="Start Job" name="Start_Job" bpmn:id="_ihEfkCHIEeK7ToHmhWq0hw"></bpel:invoke>
        <bpel:scope bpmn:label="Get Status Loop" name="Get_Status_Loop" bpmn:id="_lHgWUCHIEeK7ToHmhWq0hw">
          <bpel:sequence>
            <bpel:wait bpmn:label="Timer_Intermediate_Event" name="Timer_Intermediate_Event" bpmn:id="_mkWHwCHIEeK7ToHmhWq0hw">
              <bpel:for>"PT10S"</bpel:for>
            </bpel:wait>
            <bpel:empty bpmn:label="Get Status" name="Get_Status" bpmn:id="_lHg9YCHIEeK7ToHmhWq0hw"/>
          </bpel:sequence>
        </bpel:scope>
        <bpel:empty bpmn:label="Get result" name="Get_result" bpmn:id="_o7IY8CHIEeK7ToHmhWq0hw"/>
        <bpel:if>
          <bpel:condition>true()</bpel:condition>
          <bpel:sequence>
            <bpel:invoke partnerLink="wFAdapterAndTCForHttpPortPlk3Var" portType="tcPassed:restInterface" operation="tcPassed" inputVariable="tcPassedTcPassedRequestMsg" outputVariable="tcPassedTcPassedResponseMsg" bpmn:label="Send Success message" name="Send_Success_message" bpmn:id="_9NgF8CHIEeK7ToHmhWq0hw"></bpel:invoke>
            <bpel:empty bpmn:label="update success variable" name="update_success_variable" bpmn:id="_t888gCmpEeKiGsDLeswxFg"/>
          </bpel:sequence>
          <bpel:else>
            <bpel:sequence>
              <bpel:invoke partnerLink="wFAdapterAndTCForHttpPortPlk2Var" portType="tcFailure:restInterface" operation="tcFailure" inputVariable="tcFailureTcFailureRequestMsg" outputVariable="tcFailureTcFailureResponseMsg" bpmn:label="Send Error message" name="Send_Error_message" bpmn:id="_-NMBUCHIEeK7ToHmhWq0hw"></bpel:invoke>
              <bpel:empty bpmn:label="Increase Error Count" name="Increase_Error_Count" bpmn:id="_97l7ACHIEeK7ToHmhWq0hw"/>
              <bpel:invoke partnerLink="wFAdapterAndTCForHttpPortPlk0Var" portType="getTranscodeOutputLocation:restInterface" operation="transcodeOutputLocation" inputVariable="getTranscodeOutputLocationTranscodeOutputLocationRequestMsg" outputVariable="getTranscodeOutputLocationTranscodeOutputLocationResponseMsg" bpmn:label="get partial files location" name="get_partial_files_location" bpmn:id="_NEU0YCp_EeKw-vMBW_TpZw"></bpel:invoke>
              <bpel:invoke partnerLink="fS_AdapterAndTCForHttpPortPlkVar" portType="delete:restInterface" operation="delete" inputVariable="deleteDeleteRequestMsg" outputVariable="deleteDeleteResponseMsg" bpmn:label="delete partial files" name="delete_partial_files" bpmn:id="_Wpok0CmaEeKiGsDLeswxFg"></bpel:invoke>
            </bpel:sequence>
          </bpel:else>
        </bpel:if>
      </bpel:sequence>
    </bpel:scope>
    <bpel:if>
      <bpel:condition>true()</bpel:condition>
      <bpel:sequence>
        <bpel:empty bpmn:label="finished sucessfully" name="finished_sucessfully" bpmn:id="_DEWtsCmiEeKiGsDLeswxFg"/>
        <bpel:empty bpmn:label="Empty_End_Event" name="Empty_End_Event" bpmn:id="_4l-wsCmpEeKiGsDLeswxFg"/>
      </bpel:sequence>
      <bpel:else>
        <bpel:sequence>
          <bpel:invoke partnerLink="wFAdapterAndTCForHttpPortPlk4Var" portType="tcTotalFailure:restInterface" operation="tcTotalFailure" inputVariable="tcTotalFailureTcTotalFailureRequestMsg" outputVariable="tcTotalFailureTcTotalFailureResponseMsg" bpmn:label="Send Fatal Error Message" name="Send_Fatal_Error_Message" bpmn:id="_pEa30CHIEeK7ToHmhWq0hw"></bpel:invoke>
          <bpel:empty bpmn:label="finished with error" name="finished_with_error" bpmn:id="_r5EMcCmZEeKiGsDLeswxFg"/>
          <bpel:empty bpmn:label="Empty_End_Event" name="Empty_End_Event-1" bpmn:id="_xQBqECmZEeKiGsDLeswxFg"/>
        </bpel:sequence>
      </bpel:else>
    </bpel:if>
  </bpel:sequence>
</bpel:process>