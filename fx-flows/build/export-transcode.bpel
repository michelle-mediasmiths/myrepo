<?xml version="1.0" encoding="UTF-8"?>
<bpel:process xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:vprop="http://docs.oasis-open.org/wsbpel/2.0/varprop" xmlns:pnlk="http://docs.oasis-open.org/wsbpel/2.0/plnktype" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ode="http://www.apache.org/ode/type/extension" xmlns:tcTotalFailure="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcTotalFailure.rest" xmlns:tcFailure="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcFailure.rest" xmlns:isTaskCancelled="http://ns.mediasmithsforge.com/foxtel/wfAdapter/isTaskCancelled.rest" xmlns:deleteJob="http://ns.mediasmithsforge.com/foxtel/tcAdapter/deleteJob.rest" xmlns:tns="http://ns.mediasmiths.com/foxtel/wf/adapter" xmlns:FSAdapter="http://ns.mediasmiths.com/foxtel/fs/adapter" xmlns:createJob="http://ns.mediasmithsforge.com/foxtel/tcAdapter/createJob.rest" xmlns:setPriority="http://ns.mediasmithsforge.com/foxtel/tcAdapter/setPriority.rest" xmlns:queryJob="http://ns.mediasmithsforge.com/foxtel/tcAdapter/queryJob.rest" xmlns:this="http://ns.mediasmithsforge.com/foxtel/export/transcode" xmlns:Pool="http://ns.mediasmithsforge.com/foxtel/export/Pool" xmlns:tcGetPriority="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcGetPriority.rest" xmlns:diag="http://ns.mediasmithsforge.com/foxtel/export" xmlns:writeexportcompanions="http://ns.mediasmithsforge.com/foxtel/wfAdapter/writeexportcompanions.rest" xmlns:wfadapter="http://ns.mediasmithsforge.com/foxtel/export/wfadapter" xmlns:delete="http://ns.mediasmithsforge.com/foxtel/fsAdapter/delete.rest" xmlns:caller="http://ns.mediasmithsforge.com/foxtel/export/caller" xmlns:tcPassed="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcPassed.rest" xmlns:tcadapter="http://ns.mediasmithsforge.com/foxtel/export/tcadapter" xmlns:tcAdapter="http://ns.mediasmiths.com/foxtel/tc/adapter" xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:bpmn="http://www.intalio.com/bpms" xmlns:atomic="http://ode.apache.org/atomicScope" queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0" expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath2.0" bpmn:label="transcode" name="transcode" bpmn:id="_ZRM1AHEMEeKgV8mGUipbQA" targetNamespace="http://ns.mediasmithsforge.com/foxtel/export/transcode">
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/fsAdapter/delete.rest" location="fsAdapter/delete.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/tcAdapter/createJob.rest" location="tcAdapter/createJob.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/tcAdapter/deleteJob.rest" location="tcAdapter/deleteJob.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/tcAdapter/queryJob.rest" location="tcAdapter/queryJob.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/tcAdapter/setPriority.rest" location="tcAdapter/setPriority.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/isTaskCancelled.rest" location="wfAdapter/isTaskCancelled.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcFailure.rest" location="wfAdapter/tcFailure.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcGetPriority.rest" location="wfAdapter/tcGetPriority.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcPassed.rest" location="wfAdapter/tcPassed.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/tcTotalFailure.rest" location="wfAdapter/tcTotalFailure.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/wfAdapter/writeexportcompanions.rest" location="wfAdapter/writeexportcompanions.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/export" location="export.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:import namespace="http://ns.mediasmithsforge.com/foxtel/export/transcode" location="export-transcode.wsdl" importType="http://schemas.xmlsoap.org/wsdl/"/>
  <bpel:partnerLinks>
    <bpel:partnerLink name="transcodeAndCallerPlkVar" partnerLinkType="diag:transcodeAndCaller" myRole="transcode_for_caller"/>
    <bpel:partnerLink name="transcodeAndPoolForHttpPortPlkVar" partnerLinkType="diag:transcodeAndPoolForHttpPortPlk" initializePartnerRole="yes" partnerRole="Pool_for_transcode"/>
    <bpel:partnerLink name="transcodeAndTcadapterForHttpPortPlk0Var" partnerLinkType="diag:transcodeAndTcadapterForHttpPortPlk0" initializePartnerRole="yes" partnerRole="tcadapter_for_transcode"/>
    <bpel:partnerLink name="transcodeAndTcadapterForHttpPortPlk2Var" partnerLinkType="diag:transcodeAndTcadapterForHttpPortPlk2" initializePartnerRole="yes" partnerRole="tcadapter_for_transcode"/>
    <bpel:partnerLink name="wfadapterAndTranscodeForHttpPortPlk0Var" partnerLinkType="diag:wfadapterAndTranscodeForHttpPortPlk0" initializePartnerRole="yes" partnerRole="wfadapter_for_transcode"/>
    <bpel:partnerLink name="transcodeAndTcadapterForHttpPortPlk1Var" partnerLinkType="diag:transcodeAndTcadapterForHttpPortPlk1" initializePartnerRole="yes" partnerRole="tcadapter_for_transcode"/>
    <bpel:partnerLink name="wfadapterAndTranscodeForHttpPortPlk2Var" partnerLinkType="diag:wfadapterAndTranscodeForHttpPortPlk2" initializePartnerRole="yes" partnerRole="wfadapter_for_transcode"/>
    <bpel:partnerLink name="transcodeAndTcadapterForHttpPortPlk3Var" partnerLinkType="diag:transcodeAndTcadapterForHttpPortPlk3" initializePartnerRole="yes" partnerRole="tcadapter_for_transcode"/>
    <bpel:partnerLink name="wfadapterAndTranscodeForHttpPortPlk1Var" partnerLinkType="diag:wfadapterAndTranscodeForHttpPortPlk1" initializePartnerRole="yes" partnerRole="wfadapter_for_transcode"/>
    <bpel:partnerLink name="wfadapterAndTranscodeForHttpPortPlk5Var" partnerLinkType="diag:wfadapterAndTranscodeForHttpPortPlk5" initializePartnerRole="yes" partnerRole="wfadapter_for_transcode"/>
    <bpel:partnerLink name="wfadapterAndTranscodeForHttpPortPlk3Var" partnerLinkType="diag:wfadapterAndTranscodeForHttpPortPlk3" initializePartnerRole="yes" partnerRole="wfadapter_for_transcode"/>
    <bpel:partnerLink name="wfadapterAndTranscodeForHttpPortPlk4Var" partnerLinkType="diag:wfadapterAndTranscodeForHttpPortPlk4" initializePartnerRole="yes" partnerRole="wfadapter_for_transcode"/>
  </bpel:partnerLinks>
  <bpel:correlationSets>
    <bpel:correlationSet name="corr-materialID" properties="this:materialid"/>
  </bpel:correlationSets>
  <bpel:variables>
    <bpel:variable name="thisEventStartMessageRequest" messageType="this:EventStartMessageRequest"/>
    <bpel:variable name="TranscodeErrorCount" type="xs:integer"/>
    <bpel:variable name="TranscodeSuccess" type="xs:boolean"/>
    <bpel:variable name="TaskIsCancelled" type="xs:boolean"/>
    <bpel:variable name="TranscodeJobID" type="xs:string"/>
    <bpel:variable name="TranscodeStatus" type="xs:string"/>
    <bpel:variable name="TcOutputPath" type="xs:string"/>
    <bpel:variable name="tcPriority" type="xs:int"/>
  </bpel:variables>
  <bpel:sequence>
    <bpel:receive partnerLink="transcodeAndCallerPlkVar" portType="this:Forcaller" operation="EventStartMessage" variable="thisEventStartMessageRequest" createInstance="yes" bpmn:label="Message_Start_Event" name="Message_Start_Event" bpmn:id="_b0q3UHEMEeKgV8mGUipbQA">
      <bpel:correlations>
        <bpel:correlation set="corr-materialID" initiate="yes"/>
      </bpel:correlations>
    </bpel:receive>
    <bpel:assign bpmn:label="Initialise Variables" name="Initialise_Variables" bpmn:id="_cP-TQHEMEeKgV8mGUipbQA">
      <bpel:copy>
        <bpel:from>false()</bpel:from>
        <bpel:to>$TaskIsCancelled</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>false()</bpel:from>
        <bpel:to>$TranscodeSuccess</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>0</bpel:from>
        <bpel:to>$TranscodeErrorCount</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>"INCOMPLETE"</bpel:from>
        <bpel:to>$TranscodeStatus</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>""</bpel:from>
        <bpel:to>$TranscodeJobID</bpel:to>
      </bpel:copy>
      <bpel:copy>
        <bpel:from>$thisEventStartMessageRequest.body/tns:tcParams/tcAdapter:priority/text()</bpel:from>
        <bpel:to>$tcPriority</bpel:to>
      </bpel:copy>
    </bpel:assign>
    <bpel:scope bpmn:label="Attempt Transcode up to 3 times" name="Attempt_Transcode_up_to_3_times" bpmn:id="_oN3BkHEMEeKgV8mGUipbQA">
      <bpel:repeatUntil bpmn:label="Attempt Transcode up to 3 times" name="Attempt_Transcode_up_to_3_times-1">
        <bpel:scope bpmn:label="Attempt Transcode" name="Attempt_Transcode" bpmn:id="_son8sHEMEeKgV8mGUipbQA">
          <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
            <ext:faultOnFailure>true</ext:faultOnFailure>
          </ext:failureHandling>
          <bpel:faultHandlers>
            <bpel:catchAll>
              <bpel:sequence>
                <bpel:empty bpmn:label="error" name="error" bpmn:id="_wKncwHEMEeKgV8mGUipbQA"/>
                <bpel:assign bpmn:label="incremement error count" name="incremement_error_count" bpmn:id="_Gk24YHEREeKgV8mGUipbQA">
                  <bpel:copy>
                    <bpel:from>$TranscodeErrorCount + 1</bpel:from>
                    <bpel:to>$TranscodeErrorCount</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:scope bpmn:label="SubProcess" name="SubProcess" bpmn:id="_OScfQLM1EeKieaePm6sHlw">
                  <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                    <ext:retryFor>10</ext:retryFor>
                    <ext:retryDelay>60</ext:retryDelay>
                  </ext:failureHandling>
                  <bpel:variables>
                    <bpel:variable name="deleteDeleteRequestMsg" messageType="delete:delete_input"/>
                    <bpel:variable name="deleteDeleteResponseMsg" messageType="delete:delete_output"/>
                  </bpel:variables>
                  <bpel:sequence>
                    <bpel:assign name="init-variables-SubProcess" bpmn:id="_OScfQLM1EeKieaePm6sHlw">
                      <bpel:copy bpmn:label="$deleteDeleteRequestMsg">
                        <bpel:from>
                          <bpel:literal>
<FSAdapter:deleteRequest>
  <FSAdapter:path></FSAdapter:path>
</FSAdapter:deleteRequest></bpel:literal>
                        </bpel:from>
                        <bpel:to>$deleteDeleteRequestMsg.body</bpel:to>
                      </bpel:copy>
                    </bpel:assign>
                    <bpel:assign bpmn:label="Delete Partial Files" name="Delete_Partial_Files" bpmn:id="_OSdtYLM1EeKieaePm6sHlw">
                      <bpel:copy>
                        <bpel:from>$thisEventStartMessageRequest.body/tns:tcParams/tcAdapter:outputFolder/text()</bpel:from>
                        <bpel:to>$deleteDeleteRequestMsg.body/FSAdapter:path</bpel:to>
                      </bpel:copy>
                    </bpel:assign>
                    <bpel:invoke partnerLink="transcodeAndPoolForHttpPortPlkVar" portType="delete:restInterface" operation="delete" inputVariable="deleteDeleteRequestMsg" outputVariable="deleteDeleteResponseMsg" bpmn:label="Delete Partial Files" name="Delete_Partial_Files-1" bpmn:id="_OSdtYLM1EeKieaePm6sHlw"></bpel:invoke>
                  </bpel:sequence>
                </bpel:scope>
                <bpel:wait bpmn:label="wait a minute before any retry" name="wait_a_minute_before_any_retry" bpmn:id="_KSoKoHEREeKgV8mGUipbQA">
                  <bpel:for>"PT60S"</bpel:for>
                </bpel:wait>
              </bpel:sequence>
            </bpel:catchAll>
          </bpel:faultHandlers>
          <bpel:sequence>
            <bpel:scope bpmn:label="SubProcess" name="SubProcess-1" bpmn:id="_D76GELMxEeKieaePm6sHlw">
              <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                <ext:retryFor>10</ext:retryFor>
                <ext:retryDelay>60</ext:retryDelay>
              </ext:failureHandling>
              <bpel:variables>
                <bpel:variable name="createJobCreateJobRequestMsg" messageType="createJob:createJob_input"/>
                <bpel:variable name="createJobCreateJobResponseMsg" messageType="createJob:createJob_output"/>
              </bpel:variables>
              <bpel:sequence>
                <bpel:assign name="init-variables-SubProcess" bpmn:id="_D76GELMxEeKieaePm6sHlw">
                  <bpel:copy bpmn:label="$createJobCreateJobRequestMsg">
                    <bpel:from>
                      <bpel:literal>
<tcAdapter:TCJob>
  <tcAdapter:purpose></tcAdapter:purpose>
  <tcAdapter:resolution></tcAdapter:resolution>
  <tcAdapter:audioType></tcAdapter:audioType>
  <tcAdapter:description></tcAdapter:description>
  <tcAdapter:inputFile></tcAdapter:inputFile>
  <tcAdapter:outputFolder></tcAdapter:outputFolder>
  <tcAdapter:outputFileBasename></tcAdapter:outputFileBasename>
  <tcAdapter:bug>
    <tcAdapter:channel></tcAdapter:channel>
    <tcAdapter:position></tcAdapter:position>
    <tcAdapter:opacity></tcAdapter:opacity>
  </tcAdapter:bug>
  <tcAdapter:timecode>
    <tcAdapter:location></tcAdapter:location>
    <tcAdapter:size></tcAdapter:size>
    <tcAdapter:background></tcAdapter:background>
    <tcAdapter:foreground></tcAdapter:foreground>
  </tcAdapter:timecode>
  <tcAdapter:priority></tcAdapter:priority>
  <tcAdapter:ftpupload>
    <tcAdapter:filename></tcAdapter:filename>
    <tcAdapter:folder></tcAdapter:folder>
    <tcAdapter:server></tcAdapter:server>
    <tcAdapter:user></tcAdapter:user>
    <tcAdapter:password></tcAdapter:password>
  </tcAdapter:ftpupload>
</tcAdapter:TCJob></bpel:literal>
                    </bpel:from>
                    <bpel:to>$createJobCreateJobRequestMsg.body</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:assign bpmn:label="Create Transcode Job" name="Create_Transcode_Job" bpmn:id="_D7--kLMxEeKieaePm6sHlw">
                  <bpel:copy>
                    <bpel:from>$thisEventStartMessageRequest.body/tns:tcParams</bpel:from>
                    <bpel:to>$createJobCreateJobRequestMsg.body</bpel:to>
                  </bpel:copy>
                </bpel:assign>
                <bpel:invoke partnerLink="transcodeAndTcadapterForHttpPortPlk0Var" portType="createJob:restInterface" operation="createJob" inputVariable="createJobCreateJobRequestMsg" outputVariable="createJobCreateJobResponseMsg" bpmn:label="Create Transcode Job" name="Create_Transcode_Job-1" bpmn:id="_D7--kLMxEeKieaePm6sHlw"></bpel:invoke>
                <bpel:assign bpmn:label="record job id" name="record_job_id" bpmn:id="_bZkDULMxEeKieaePm6sHlw">
                  <bpel:copy>
                    <bpel:from>$createJobCreateJobResponseMsg.response/text()</bpel:from>
                    <bpel:to>$TranscodeJobID</bpel:to>
                  </bpel:copy>
                </bpel:assign>
              </bpel:sequence>
            </bpel:scope>
            <bpel:scope bpmn:label="loop until complete or cancelled" name="loop_until_complete_or_cancelled" bpmn:id="_wL8dAHENEeKgV8mGUipbQA">
              <bpel:repeatUntil bpmn:label="loop until complete or cancelled" name="loop_until_complete_or_cancelled-1">
                <bpel:sequence>
                  <bpel:wait bpmn:label="Timer_Intermediate_Event" name="Timer_Intermediate_Event" bpmn:id="_0EO9MHENEeKgV8mGUipbQA">
                    <bpel:for>"PT30S"</bpel:for>
                  </bpel:wait>
                  <bpel:scope bpmn:label="SubProcess" name="SubProcess-2" bpmn:id="_qGUysLMxEeKieaePm6sHlw">
                    <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                      <ext:retryFor>10</ext:retryFor>
                      <ext:retryDelay>60</ext:retryDelay>
                    </ext:failureHandling>
                    <bpel:variables>
                      <bpel:variable name="queryJobQueryJobRequestMsg" messageType="queryJob:queryJob_input"/>
                      <bpel:variable name="queryJobQueryJobResponseMsg" messageType="queryJob:queryJob_output"/>
                    </bpel:variables>
                    <bpel:sequence>
                      <bpel:assign name="init-variables-SubProcess" bpmn:id="_qGUysLMxEeKieaePm6sHlw">
                        <bpel:copy bpmn:label="$queryJobQueryJobRequestMsg">
                          <bpel:from>
                            <bpel:literal>
<queryJob:guid_urlType></queryJob:guid_urlType></bpel:literal>
                          </bpel:from>
                          <bpel:to>$queryJobQueryJobRequestMsg.guid</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                      <bpel:assign bpmn:label="Get Status" name="Get_Status" bpmn:id="_qGX2ALMxEeKieaePm6sHlw">
                        <bpel:copy>
                          <bpel:from>$TranscodeJobID</bpel:from>
                          <bpel:to>$queryJobQueryJobRequestMsg.guid</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                      <bpel:invoke partnerLink="transcodeAndTcadapterForHttpPortPlk2Var" portType="queryJob:restInterface" operation="queryJob" inputVariable="queryJobQueryJobRequestMsg" outputVariable="queryJobQueryJobResponseMsg" bpmn:label="Get Status" name="Get_Status-1" bpmn:id="_qGX2ALMxEeKieaePm6sHlw"></bpel:invoke>
                      <bpel:assign bpmn:label="Record Status" name="Record_Status" bpmn:id="_rerFsLMxEeKieaePm6sHlw">
                        <bpel:copy>
                          <bpel:from>$queryJobQueryJobResponseMsg.response/tcAdapter:state/text()</bpel:from>
                          <bpel:to>$TranscodeStatus</bpel:to>
                        </bpel:copy>
                        <bpel:copy>
                          <bpel:from>$queryJobQueryJobResponseMsg.response/tcAdapter:priority/text()</bpel:from>
                          <bpel:to>$tcPriority</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                    </bpel:sequence>
                  </bpel:scope>
                  <bpel:scope bpmn:label="SubProcess" name="SubProcess-3" bpmn:id="_Ff_5kLMyEeKieaePm6sHlw">
                    <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                      <ext:retryFor>10</ext:retryFor>
                      <ext:retryDelay>60</ext:retryDelay>
                    </ext:failureHandling>
                    <bpel:variables>
                      <bpel:variable name="isTaskCancelledIsCancelledRequestMsg" messageType="isTaskCancelled:isCancelled_input"/>
                      <bpel:variable name="isTaskCancelledIsCancelledResponseMsg" messageType="isTaskCancelled:isCancelled_output"/>
                    </bpel:variables>
                    <bpel:sequence>
                      <bpel:assign name="init-variables-SubProcess" bpmn:id="_Ff_5kLMyEeKieaePm6sHlw">
                        <bpel:copy bpmn:label="$isTaskCancelledIsCancelledRequestMsg">
                          <bpel:from>
                            <bpel:literal>
<isTaskCancelled:taskid_urlType></isTaskCancelled:taskid_urlType></bpel:literal>
                          </bpel:from>
                          <bpel:to>$isTaskCancelledIsCancelledRequestMsg.taskid</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                      <bpel:assign bpmn:label="Check if cancelled" name="Check_if_cancelled" bpmn:id="_FgDj8LMyEeKieaePm6sHlw">
                        <bpel:copy>
                          <bpel:from>$thisEventStartMessageRequest.body/tns:taskID/text()</bpel:from>
                          <bpel:to>$isTaskCancelledIsCancelledRequestMsg.taskid</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                      <bpel:invoke partnerLink="wfadapterAndTranscodeForHttpPortPlk0Var" portType="isTaskCancelled:restInterface" operation="isCancelled" inputVariable="isTaskCancelledIsCancelledRequestMsg" outputVariable="isTaskCancelledIsCancelledResponseMsg" bpmn:label="Check if cancelled" name="Check_if_cancelled-1" bpmn:id="_FgDj8LMyEeKieaePm6sHlw"></bpel:invoke>
                      <bpel:assign bpmn:label="Record Cancelled Result" name="Record_Cancelled_Result" bpmn:id="_HPs8oLMyEeKieaePm6sHlw">
                        <bpel:copy>
                          <bpel:from>$isTaskCancelledIsCancelledResponseMsg.response/text()</bpel:from>
                          <bpel:to>$TaskIsCancelled</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                    </bpel:sequence>
                  </bpel:scope>
                  <bpel:if>
                    <bpel:condition>$TaskIsCancelled = true()</bpel:condition>
                    <bpel:scope bpmn:label="SubProcess" name="SubProcess-4" bpmn:id="_R_wwcLMzEeKieaePm6sHlw">
                      <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                        <ext:retryFor>10</ext:retryFor>
                        <ext:retryDelay>60</ext:retryDelay>
                      </ext:failureHandling>
                      <bpel:variables>
                        <bpel:variable name="deleteJobDeleteJobRequestMsg" messageType="deleteJob:deleteJob_input"/>
                        <bpel:variable name="deleteJobDeleteJobResponseMsg" messageType="deleteJob:deleteJob_output"/>
                      </bpel:variables>
                      <bpel:sequence>
                        <bpel:assign name="init-variables-SubProcess" bpmn:id="_R_wwcLMzEeKieaePm6sHlw">
                          <bpel:copy bpmn:label="$deleteJobDeleteJobRequestMsg">
                            <bpel:from>
                              <bpel:literal>
<deleteJob:guid_urlType></deleteJob:guid_urlType></bpel:literal>
                            </bpel:from>
                            <bpel:to>$deleteJobDeleteJobRequestMsg.guid</bpel:to>
                          </bpel:copy>
                        </bpel:assign>
                        <bpel:assign bpmn:label="Cancelled, stop job" name="Cancelled__stop_job" bpmn:id="_R_zzwLMzEeKieaePm6sHlw">
                          <bpel:copy>
                            <bpel:from>$TranscodeJobID</bpel:from>
                            <bpel:to>$deleteJobDeleteJobRequestMsg.guid</bpel:to>
                          </bpel:copy>
                        </bpel:assign>
                        <bpel:invoke partnerLink="transcodeAndTcadapterForHttpPortPlk1Var" portType="deleteJob:restInterface" operation="deleteJob" inputVariable="deleteJobDeleteJobRequestMsg" outputVariable="deleteJobDeleteJobResponseMsg" bpmn:label="Cancelled, stop job" name="Cancelled__stop_job-1" bpmn:id="_R_zzwLMzEeKieaePm6sHlw"></bpel:invoke>
                      </bpel:sequence>
                    </bpel:scope>
                    <bpel:else>
                      <bpel:sequence>
                        <bpel:empty bpmn:label="not cancelled" name="not_cancelled" bpmn:id="_JsRcoHEOEeKgV8mGUipbQA"/>
                        <bpel:scope bpmn:label="SubProcess" name="SubProcess-5" bpmn:id="_cVN90LMyEeKieaePm6sHlw">
                          <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                            <ext:retryFor>10</ext:retryFor>
                            <ext:retryDelay>60</ext:retryDelay>
                          </ext:failureHandling>
                          <bpel:variables>
                            <bpel:variable name="tcGetPriorityGetpriorityRequestMsg" messageType="tcGetPriority:getpriority_input"/>
                            <bpel:variable name="tcGetPriorityGetpriorityResponseMsg" messageType="tcGetPriority:getpriority_output"/>
                          </bpel:variables>
                          <bpel:sequence>
                            <bpel:assign name="init-variables-SubProcess" bpmn:id="_cVN90LMyEeKieaePm6sHlw">
                              <bpel:copy bpmn:label="$tcGetPriorityGetpriorityRequestMsg">
                                <bpel:from>
                                  <bpel:literal>
<tns:getPriorityRequest>
  <tns:created></tns:created>
  <tns:currentPriority></tns:currentPriority>
  <tns:jobType></tns:jobType>
  <tns:packageID></tns:packageID>
</tns:getPriorityRequest></bpel:literal>
                                </bpel:from>
                                <bpel:to>$tcGetPriorityGetpriorityRequestMsg.body</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                            <bpel:assign bpmn:label="Query Priority" name="Query_Priority" bpmn:id="_cVRBILMyEeKieaePm6sHlw">
                              <bpel:copy>
                                <bpel:from>$thisEventStartMessageRequest.body/tns:created/text()</bpel:from>
                                <bpel:to>$tcGetPriorityGetpriorityRequestMsg.body/tns:created</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>$tcPriority</bpel:from>
                                <bpel:to>$tcGetPriorityGetpriorityRequestMsg.body/tns:currentPriority</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>$thisEventStartMessageRequest.body/tns:jobType/text()</bpel:from>
                                <bpel:to>$tcGetPriorityGetpriorityRequestMsg.body/tns:jobType</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>$thisEventStartMessageRequest.body/tns:packageID/text()</bpel:from>
                                <bpel:to>$tcGetPriorityGetpriorityRequestMsg.body/tns:packageID</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                            <bpel:invoke partnerLink="wfadapterAndTranscodeForHttpPortPlk2Var" portType="tcGetPriority:restInterface" operation="getpriority" inputVariable="tcGetPriorityGetpriorityRequestMsg" outputVariable="tcGetPriorityGetpriorityResponseMsg" bpmn:label="Query Priority" name="Query_Priority-1" bpmn:id="_cVRBILMyEeKieaePm6sHlw"></bpel:invoke>
                            <bpel:assign bpmn:label="Record Priority" name="Record_Priority" bpmn:id="_f2ByILMyEeKieaePm6sHlw">
                              <bpel:copy>
                                <bpel:from>$tcGetPriorityGetpriorityResponseMsg.response/tns:priority/text()</bpel:from>
                                <bpel:to>$tcPriority</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                          </bpel:sequence>
                        </bpel:scope>
                        <bpel:scope bpmn:label="SubProcess" name="SubProcess-6" bpmn:id="_FJlIMLMzEeKieaePm6sHlw">
                          <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                            <ext:retryFor>10</ext:retryFor>
                            <ext:retryDelay>60</ext:retryDelay>
                          </ext:failureHandling>
                          <bpel:variables>
                            <bpel:variable name="setPrioritySetPriorityRequestMsg" messageType="setPriority:setPriority_input"/>
                            <bpel:variable name="setPrioritySetPriorityResponseMsg" messageType="setPriority:setPriority_output"/>
                          </bpel:variables>
                          <bpel:sequence>
                            <bpel:assign name="init-variables-SubProcess" bpmn:id="_FJlIMLMzEeKieaePm6sHlw">
                              <bpel:copy bpmn:label="$setPrioritySetPriorityRequestMsg">
                                <bpel:from>
                                  <bpel:literal>
<setPriority:guid_urlType></setPriority:guid_urlType></bpel:literal>
                                </bpel:from>
                                <bpel:to>$setPrioritySetPriorityRequestMsg.guid</bpel:to>
                              </bpel:copy>
                              <bpel:copy bpmn:label="$setPrioritySetPriorityRequestMsg">
                                <bpel:from>
                                  <bpel:literal>
<setPriority:priority_urlType></setPriority:priority_urlType></bpel:literal>
                                </bpel:from>
                                <bpel:to>$setPrioritySetPriorityRequestMsg.priority</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                            <bpel:assign bpmn:label="Set Priority" name="Set_Priority" bpmn:id="_FJoLgLMzEeKieaePm6sHlw">
                              <bpel:copy>
                                <bpel:from>$TranscodeJobID</bpel:from>
                                <bpel:to>$setPrioritySetPriorityRequestMsg.guid</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>$tcPriority</bpel:from>
                                <bpel:to>$setPrioritySetPriorityRequestMsg.priority</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                            <bpel:invoke partnerLink="transcodeAndTcadapterForHttpPortPlk3Var" portType="setPriority:restInterface" operation="setPriority" inputVariable="setPrioritySetPriorityRequestMsg" outputVariable="setPrioritySetPriorityResponseMsg" bpmn:label="Set Priority" name="Set_Priority-1" bpmn:id="_FJoLgLMzEeKieaePm6sHlw"></bpel:invoke>
                          </bpel:sequence>
                        </bpel:scope>
                      </bpel:sequence>
                    </bpel:else>
                  </bpel:if>
                </bpel:sequence>
                <bpel:condition>("INCOMPLETE" != $TranscodeStatus) or ($TaskIsCancelled = true())</bpel:condition>
              </bpel:repeatUntil>
            </bpel:scope>
            <bpel:if>
              <bpel:condition>$TaskIsCancelled = true()</bpel:condition>
              <bpel:sequence>
                <bpel:empty bpmn:label="cancelled" name="cancelled" bpmn:id="_cxK0cHEPEeKgV8mGUipbQA"/>
                <bpel:empty bpmn:label="join" name="join" bpmn:id="_05NmILM0EeKieaePm6sHlw"/>
                <bpel:scope bpmn:label="SubProcess" name="SubProcess-7" bpmn:id="_qCy2MLM0EeKieaePm6sHlw">
                  <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                    <ext:retryFor>10</ext:retryFor>
                    <ext:retryDelay>60</ext:retryDelay>
                  </ext:failureHandling>
                  <bpel:variables>
                    <bpel:variable name="deleteDeleteRequestMsg" messageType="delete:delete_input"/>
                    <bpel:variable name="deleteDeleteResponseMsg" messageType="delete:delete_output"/>
                  </bpel:variables>
                  <bpel:sequence>
                    <bpel:assign name="init-variables-SubProcess" bpmn:id="_qCy2MLM0EeKieaePm6sHlw">
                      <bpel:copy bpmn:label="$deleteDeleteRequestMsg">
                        <bpel:from>
                          <bpel:literal>
<FSAdapter:deleteRequest>
  <FSAdapter:path></FSAdapter:path>
</FSAdapter:deleteRequest></bpel:literal>
                        </bpel:from>
                        <bpel:to>$deleteDeleteRequestMsg.body</bpel:to>
                      </bpel:copy>
                    </bpel:assign>
                    <bpel:assign bpmn:label="Delete Partial Files" name="Delete_Partial_Files-2" bpmn:id="_qC3usLM0EeKieaePm6sHlw">
                      <bpel:copy>
                        <bpel:from>$thisEventStartMessageRequest.body/tns:tcParams/tcAdapter:outputFolder/text()</bpel:from>
                        <bpel:to>$deleteDeleteRequestMsg.body/FSAdapter:path</bpel:to>
                      </bpel:copy>
                    </bpel:assign>
                    <bpel:invoke partnerLink="transcodeAndPoolForHttpPortPlkVar" portType="delete:restInterface" operation="delete" inputVariable="deleteDeleteRequestMsg" outputVariable="deleteDeleteResponseMsg" bpmn:label="Delete Partial Files" name="Delete_Partial_Files-3" bpmn:id="_qC3usLM0EeKieaePm6sHlw"></bpel:invoke>
                  </bpel:sequence>
                </bpel:scope>
              </bpel:sequence>
              <bpel:else>
                <bpel:sequence>
                  <bpel:empty bpmn:label="not cancelled" name="not_cancelled-1" bpmn:id="_cVng4HEPEeKgV8mGUipbQA"/>
                  <bpel:if>
                    <bpel:condition>"SUCCESS" = $TranscodeStatus</bpel:condition>
                    <bpel:sequence>
                      <bpel:empty bpmn:label="transcode succesful" name="transcode_succesful" bpmn:id="__xuNIHEPEeKgV8mGUipbQA"/>
                      <bpel:assign bpmn:label="update success variable" name="update_success_variable" bpmn:id="_LtpMkHEQEeKgV8mGUipbQA">
                        <bpel:copy>
                          <bpel:from>true()</bpel:from>
                          <bpel:to>$TranscodeSuccess</bpel:to>
                        </bpel:copy>
                      </bpel:assign>
                    </bpel:sequence>
                    <bpel:else>
                      <bpel:sequence>
                        <bpel:empty bpmn:label="transcode not succesful" name="transcode_not_succesful" bpmn:id="_A_wGgHEQEeKgV8mGUipbQA"/>
                        <bpel:assign bpmn:label="incremement error count" name="incremement_error_count-1" bpmn:id="_dPTFcHEQEeKgV8mGUipbQA">
                          <bpel:copy>
                            <bpel:from>1 + $TranscodeErrorCount</bpel:from>
                            <bpel:to>$TranscodeErrorCount</bpel:to>
                          </bpel:copy>
                        </bpel:assign>
                        <bpel:scope bpmn:label="SubProcess" name="SubProcess-8" bpmn:id="_Qjw3ELM0EeKieaePm6sHlw">
                          <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                            <ext:retryFor>10</ext:retryFor>
                            <ext:retryDelay>60</ext:retryDelay>
                          </ext:failureHandling>
                          <bpel:variables>
                            <bpel:variable name="tcFailureTcFailureRequestMsg" messageType="tcFailure:tcFailure_input"/>
                            <bpel:variable name="tcFailureTcFailureResponseMsg" messageType="tcFailure:tcFailure_output"/>
                          </bpel:variables>
                          <bpel:sequence>
                            <bpel:assign name="init-variables-SubProcess" bpmn:id="_Qjw3ELM0EeKieaePm6sHlw">
                              <bpel:copy bpmn:label="$tcFailureTcFailureRequestMsg">
                                <bpel:from>
                                  <bpel:literal>
<tns:tcFailureNotification>
  <tns:assetID></tns:assetID>
  <tns:forTXDelivery></tns:forTXDelivery>
  <tns:taskID></tns:taskID>
  <tns:title></tns:title>
</tns:tcFailureNotification></bpel:literal>
                                </bpel:from>
                                <bpel:to>$tcFailureTcFailureRequestMsg.body</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                            <bpel:assign bpmn:label="Send Failure Mesage" name="Send_Failure_Mesage" bpmn:id="_Qj2WoLM0EeKieaePm6sHlw">
                              <bpel:copy>
                                <bpel:from>$thisEventStartMessageRequest.body/tns:assetID/text()</bpel:from>
                                <bpel:to>$tcFailureTcFailureRequestMsg.body/tns:assetID</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>false()</bpel:from>
                                <bpel:to>$tcFailureTcFailureRequestMsg.body/tns:forTXDelivery</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>$thisEventStartMessageRequest.body/tns:taskID/text()</bpel:from>
                                <bpel:to>$tcFailureTcFailureRequestMsg.body/tns:taskID</bpel:to>
                              </bpel:copy>
                              <bpel:copy>
                                <bpel:from>$thisEventStartMessageRequest.body/tns:title/text()</bpel:from>
                                <bpel:to>$tcFailureTcFailureRequestMsg.body/tns:title</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                            <bpel:invoke partnerLink="wfadapterAndTranscodeForHttpPortPlk1Var" portType="tcFailure:restInterface" operation="tcFailure" inputVariable="tcFailureTcFailureRequestMsg" outputVariable="tcFailureTcFailureResponseMsg" bpmn:label="Send Failure Mesage" name="Send_Failure_Mesage-1" bpmn:id="_Qj2WoLM0EeKieaePm6sHlw"></bpel:invoke>
                          </bpel:sequence>
                        </bpel:scope>
                        <bpel:empty bpmn:label="join" name="join-1" bpmn:id="_05NmILM0EeKieaePm6sHlw"/>
                        <bpel:scope bpmn:label="SubProcess" name="SubProcess-9" bpmn:id="_qCy2MLM0EeKieaePm6sHlw">
                          <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
                            <ext:retryFor>10</ext:retryFor>
                            <ext:retryDelay>60</ext:retryDelay>
                          </ext:failureHandling>
                          <bpel:variables>
                            <bpel:variable name="deleteDeleteRequestMsg" messageType="delete:delete_input"/>
                            <bpel:variable name="deleteDeleteResponseMsg" messageType="delete:delete_output"/>
                          </bpel:variables>
                          <bpel:sequence>
                            <bpel:assign name="init-variables-SubProcess" bpmn:id="_qCy2MLM0EeKieaePm6sHlw">
                              <bpel:copy bpmn:label="$deleteDeleteRequestMsg">
                                <bpel:from>
                                  <bpel:literal>
<FSAdapter:deleteRequest>
  <FSAdapter:path></FSAdapter:path>
</FSAdapter:deleteRequest></bpel:literal>
                                </bpel:from>
                                <bpel:to>$deleteDeleteRequestMsg.body</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                            <bpel:assign bpmn:label="Delete Partial Files" name="Delete_Partial_Files-4" bpmn:id="_qC3usLM0EeKieaePm6sHlw">
                              <bpel:copy>
                                <bpel:from>$thisEventStartMessageRequest.body/tns:tcParams/tcAdapter:outputFolder/text()</bpel:from>
                                <bpel:to>$deleteDeleteRequestMsg.body/FSAdapter:path</bpel:to>
                              </bpel:copy>
                            </bpel:assign>
                            <bpel:invoke partnerLink="transcodeAndPoolForHttpPortPlkVar" portType="delete:restInterface" operation="delete" inputVariable="deleteDeleteRequestMsg" outputVariable="deleteDeleteResponseMsg" bpmn:label="Delete Partial Files" name="Delete_Partial_Files-5" bpmn:id="_qC3usLM0EeKieaePm6sHlw"></bpel:invoke>
                          </bpel:sequence>
                        </bpel:scope>
                      </bpel:sequence>
                    </bpel:else>
                  </bpel:if>
                </bpel:sequence>
              </bpel:else>
            </bpel:if>
          </bpel:sequence>
        </bpel:scope>
        <bpel:condition>($TaskIsCancelled = true()) or (($TranscodeErrorCount&gt;= 3) or (true() = $TranscodeSuccess))</bpel:condition>
      </bpel:repeatUntil>
    </bpel:scope>
    <bpel:if>
      <bpel:condition>$TranscodeSuccess = true()</bpel:condition>
      <bpel:sequence>
        <bpel:empty bpmn:label="success" name="success" bpmn:id="_u1kjIHEREeKgV8mGUipbQA"/>
        <bpel:scope bpmn:label="SubProcess" name="SubProcess-10" bpmn:id="_X5t3gMIHEeK5gKDdeHD_PQ">
          <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
            <ext:retryFor>10</ext:retryFor>
            <ext:retryDelay>60</ext:retryDelay>
          </ext:failureHandling>
          <bpel:variables>
            <bpel:variable name="writeexportcompanionsWrite_companionsRequestMsg" messageType="writeexportcompanions:write_companions_input"/>
            <bpel:variable name="writeexportcompanionsWrite_companionsResponseMsg" messageType="writeexportcompanions:write_companions_output"/>
          </bpel:variables>
          <bpel:sequence>
            <bpel:assign name="init-variables-SubProcess" bpmn:id="_X5t3gMIHEeK5gKDdeHD_PQ">
              <bpel:copy bpmn:label="$writeexportcompanionsWrite_companionsRequestMsg">
                <bpel:from>
                  <bpel:literal>
<tns:writeExportCompanions>
  <tns:taskID></tns:taskID>
</tns:writeExportCompanions></bpel:literal>
                </bpel:from>
                <bpel:to>$writeexportcompanionsWrite_companionsRequestMsg.body</bpel:to>
              </bpel:copy>
            </bpel:assign>
            <bpel:assign bpmn:label="write metadata if required" name="write_metadata_if_required" bpmn:id="_X56EwMIHEeK5gKDdeHD_PQ">
              <bpel:copy>
                <bpel:from>$thisEventStartMessageRequest.body/tns:taskID/text()</bpel:from>
                <bpel:to>$writeexportcompanionsWrite_companionsRequestMsg.body/tns:taskID</bpel:to>
              </bpel:copy>
            </bpel:assign>
            <bpel:invoke partnerLink="wfadapterAndTranscodeForHttpPortPlk5Var" portType="writeexportcompanions:restInterface" operation="write_companions" inputVariable="writeexportcompanionsWrite_companionsRequestMsg" outputVariable="writeexportcompanionsWrite_companionsResponseMsg" bpmn:label="write metadata if required" name="write_metadata_if_required-1" bpmn:id="_X56EwMIHEeK5gKDdeHD_PQ"></bpel:invoke>
          </bpel:sequence>
        </bpel:scope>
        <bpel:scope bpmn:label="SubProcess" name="SubProcess-11" bpmn:id="_bVFyMMIHEeK5gKDdeHD_PQ">
          <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
            <ext:retryFor>10</ext:retryFor>
            <ext:retryDelay>60</ext:retryDelay>
          </ext:failureHandling>
          <bpel:variables>
            <bpel:variable name="tcPassedTcPassedRequestMsg" messageType="tcPassed:tcPassed_input"/>
            <bpel:variable name="tcPassedTcPassedResponseMsg" messageType="tcPassed:tcPassed_output"/>
          </bpel:variables>
          <bpel:sequence>
            <bpel:assign name="init-variables-SubProcess" bpmn:id="_bVFyMMIHEeK5gKDdeHD_PQ">
              <bpel:copy bpmn:label="$tcPassedTcPassedRequestMsg">
                <bpel:from>
                  <bpel:literal>
<tns:tcPassedNotification>
  <tns:assetID></tns:assetID>
  <tns:forTXDelivery></tns:forTXDelivery>
  <tns:taskID></tns:taskID>
  <tns:title></tns:title>
  <tns:ftpupload>
    <tcAdapter:filename></tcAdapter:filename>
    <tcAdapter:folder></tcAdapter:folder>
    <tcAdapter:server></tcAdapter:server>
    <tcAdapter:user></tcAdapter:user>
    <tcAdapter:password></tcAdapter:password>
  </tns:ftpupload>
</tns:tcPassedNotification></bpel:literal>
                </bpel:from>
                <bpel:to>$tcPassedTcPassedRequestMsg.body</bpel:to>
              </bpel:copy>
            </bpel:assign>
            <bpel:assign bpmn:label="send success message" name="send_success_message" bpmn:id="_bVPjMMIHEeK5gKDdeHD_PQ">
              <bpel:copy>
                <bpel:from>$thisEventStartMessageRequest.body/tns:assetID/text()</bpel:from>
                <bpel:to>$tcPassedTcPassedRequestMsg.body/tns:assetID</bpel:to>
              </bpel:copy>
              <bpel:copy>
                <bpel:from>false()</bpel:from>
                <bpel:to>$tcPassedTcPassedRequestMsg.body/tns:forTXDelivery</bpel:to>
              </bpel:copy>
              <bpel:copy>
                <bpel:from>$thisEventStartMessageRequest.body/tns:taskID/text()</bpel:from>
                <bpel:to>$tcPassedTcPassedRequestMsg.body/tns:taskID</bpel:to>
              </bpel:copy>
              <bpel:copy>
                <bpel:from>$thisEventStartMessageRequest.body/tns:title/text()</bpel:from>
                <bpel:to>$tcPassedTcPassedRequestMsg.body/tns:title</bpel:to>
              </bpel:copy>
              <bpel:copy>
                <bpel:from>$thisEventStartMessageRequest.body/tns:tcParams/tcAdapter:ftpupload</bpel:from>
                <bpel:to>$tcPassedTcPassedRequestMsg.body/tns:ftpupload</bpel:to>
              </bpel:copy>
            </bpel:assign>
            <bpel:invoke partnerLink="wfadapterAndTranscodeForHttpPortPlk3Var" portType="tcPassed:restInterface" operation="tcPassed" inputVariable="tcPassedTcPassedRequestMsg" outputVariable="tcPassedTcPassedResponseMsg" bpmn:label="send success message" name="send_success_message-1" bpmn:id="_bVPjMMIHEeK5gKDdeHD_PQ"></bpel:invoke>
          </bpel:sequence>
        </bpel:scope>
      </bpel:sequence>
      <bpel:elseif>
        <bpel:condition>$TaskIsCancelled = true()</bpel:condition>
        <bpel:sequence>
          <bpel:empty bpmn:label="cancelled" name="cancelled-1" bpmn:id="_xAGhAHEREeKgV8mGUipbQA"/>
        </bpel:sequence>
      </bpel:elseif>
      <bpel:else>
        <bpel:sequence>
          <bpel:empty bpmn:label="error" name="error-1" bpmn:id="_wM9M0HEREeKgV8mGUipbQA"/>
          <bpel:scope bpmn:label="SubProcess" name="SubProcess-12" bpmn:id="_lqBpsLM1EeKieaePm6sHlw">
            <ext:failureHandling xmlns:ext="http://ode.apache.org/activityRecovery">
              <ext:retryFor>10</ext:retryFor>
              <ext:retryDelay>60</ext:retryDelay>
            </ext:failureHandling>
            <bpel:variables>
              <bpel:variable name="tcTotalFailureTcTotalFailureRequestMsg" messageType="tcTotalFailure:tcTotalFailure_input"/>
              <bpel:variable name="tcTotalFailureTcTotalFailureResponseMsg" messageType="tcTotalFailure:tcTotalFailure_output"/>
            </bpel:variables>
            <bpel:sequence>
              <bpel:assign name="init-variables-SubProcess" bpmn:id="_lqBpsLM1EeKieaePm6sHlw">
                <bpel:copy bpmn:label="$tcTotalFailureTcTotalFailureRequestMsg">
                  <bpel:from>
                    <bpel:literal>
<tns:tcTotalFailure>
  <tns:assetID></tns:assetID>
  <tns:forTXDelivery></tns:forTXDelivery>
  <tns:taskID></tns:taskID>
  <tns:title></tns:title>
</tns:tcTotalFailure></bpel:literal>
                  </bpel:from>
                  <bpel:to>$tcTotalFailureTcTotalFailureRequestMsg.body</bpel:to>
                </bpel:copy>
              </bpel:assign>
              <bpel:assign bpmn:label="Transcode Failed" name="Transcode_Failed" bpmn:id="_lqIXYLM1EeKieaePm6sHlw">
                <bpel:copy>
                  <bpel:from>$thisEventStartMessageRequest.body/tns:assetID/text()</bpel:from>
                  <bpel:to>$tcTotalFailureTcTotalFailureRequestMsg.body/tns:assetID</bpel:to>
                </bpel:copy>
                <bpel:copy>
                  <bpel:from>false()</bpel:from>
                  <bpel:to>$tcTotalFailureTcTotalFailureRequestMsg.body/tns:forTXDelivery</bpel:to>
                </bpel:copy>
                <bpel:copy>
                  <bpel:from>$thisEventStartMessageRequest.body/tns:taskID/text()</bpel:from>
                  <bpel:to>$tcTotalFailureTcTotalFailureRequestMsg.body/tns:taskID</bpel:to>
                </bpel:copy>
                <bpel:copy>
                  <bpel:from>$thisEventStartMessageRequest.body/tns:title/text()</bpel:from>
                  <bpel:to>$tcTotalFailureTcTotalFailureRequestMsg.body/tns:title</bpel:to>
                </bpel:copy>
              </bpel:assign>
              <bpel:invoke partnerLink="wfadapterAndTranscodeForHttpPortPlk4Var" portType="tcTotalFailure:restInterface" operation="tcTotalFailure" inputVariable="tcTotalFailureTcTotalFailureRequestMsg" outputVariable="tcTotalFailureTcTotalFailureResponseMsg" bpmn:label="Transcode Failed" name="Transcode_Failed-1" bpmn:id="_lqIXYLM1EeKieaePm6sHlw"></bpel:invoke>
            </bpel:sequence>
          </bpel:scope>
        </bpel:sequence>
      </bpel:else>
    </bpel:if>
    <bpel:empty bpmn:label="Empty_End_Event" name="Empty_End_Event" bpmn:id="_EiUjcHESEeKgV8mGUipbQA"/>
  </bpel:sequence>
</bpel:process>